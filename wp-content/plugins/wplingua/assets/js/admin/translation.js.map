{"version":3,"file":"admin/translation.js","sources":["admin/translation.js"],"sourcesContent":["/*!*\r\n **                 _     _                         \r\n ** __      ___ __ | |   (_)_ __   __ _ _   _  __ _ \r\n ** \\ \\ /\\ / / '_ \\| |   | | '_ \\ / _` | | | |/ _` |\r\n **  \\ V  V /| |_) | |___| | | | | (_| | |_| | (_| |\r\n **   \\_/\\_/ | .__/|_____|_|_| |_|\\__, |\\__,_|\\__,_|\r\n **          |_|                  |___/             \r\n **\r\n **        -- wpLingua | WordPress plugin --\r\n **   Translate and make your website multilingual\r\n **\r\n **     https://github.com/julien-jacob/wplingua\r\n **      https://wordpress.org/plugins/wplingua/\r\n **              https://wplingua.com/\r\n **\r\n **/\r\n\r\njQuery(document).ready(function ($) {\r\n\r\n    let wplngEditor = $(\"#wplng-translation-editor\");\r\n\r\n    /**\r\n     * Epand wpLingua sub-menu\r\n     */\r\n\r\n    $(\"#toplevel_page_wplingua-settings\")\r\n        .removeClass(\"wp-not-current-submenu\")\r\n        .addClass(\"wp-has-current-submenu\");\r\n\r\n    $(\"a.toplevel_page_wplingua-settings\")\r\n        .addClass(\"wp-menu-open\")\r\n        .addClass(\"wp-has-current-submenu\");\r\n\r\n    /**\r\n     * Resize text area\r\n     */\r\n    function wplngResizeTextArea($element) {\r\n        $element.height(0);\r\n        $element.height($element[0].scrollHeight - 4);\r\n    }\r\n\r\n    /**\r\n     * Decode HTML\r\n     */\r\n    function wplngDecodeHtml(string) {\r\n        let returnText = string;\r\n        returnText = returnText.replace(/&nbsp;/gi, \" \");\r\n        returnText = returnText.replace(/&amp;/gi, \"&\");\r\n        returnText = returnText.replace(/&quot;/gi, '\"');\r\n        returnText = returnText.replace(/&lt;/gi, \"<\");\r\n        returnText = returnText.replace(/&gt;/gi, \">\");\r\n        return returnText;\r\n    }\r\n\r\n    /**\r\n     * CLose editor modal\r\n     */\r\n    function wplngCloseEditorModal() {\r\n        $(\"#wplng-modal-edit-container\").hide();\r\n        $(\"#wplng-modal-edit-save\").prop(\"disabled\", false);\r\n        $(\"#wplng-modal-container\").show();\r\n        wplngInputSignature.onload = '';\r\n        wplngInputSignature.now = '';\r\n    }\r\n\r\n    /**\r\n     * Go to top button\r\n     */\r\n\r\n    function wplngToggleGoToTopButton() {\r\n        if ($(\"#wplng-modal-container\").scrollTop() > 0) {\r\n            $(\"#wplng-scroll-to-top\").fadeIn(400);\r\n        } else {\r\n            $(\"#wplng-scroll-to-top\").fadeOut(400);\r\n        }\r\n    }\r\n\r\n    wplngToggleGoToTopButton();\r\n    $(\"#wplng-modal-container\").scroll(wplngToggleGoToTopButton);\r\n\r\n    $(\"#wplng-scroll-to-top\").click(function () {\r\n        $(\"#wplng-modal-container\").animate({ scrollTop: 0 }, 800);\r\n    });\r\n\r\n    /**\r\n     * Prepare all events and default value on translation editor\r\n     */\r\n\r\n    function wplngUpdateEditorEvents() {\r\n\r\n        wplngIsUpdatePost = false;\r\n        wplngInputSignature = {\r\n            onload: wplngGetInputSignature(),\r\n            now: wplngGetInputSignature()\r\n        };\r\n\r\n        /**\r\n         * Resize text area\r\n         */\r\n\r\n        let wplngTextArea = wplngEditor.find(\".wplng-edit-language textarea\");\r\n\r\n        wplngTextArea.off(\"keyup.textarea\").on(\"keyup.textarea\", function () {\r\n            wplngResizeTextArea($(this));\r\n        });\r\n\r\n        $(window).resize(function () {\r\n            wplngTextArea.each(function () {\r\n                wplngResizeTextArea($(this));\r\n            });\r\n        });\r\n\r\n        wplngTextArea.each(function () {\r\n            wplngResizeTextArea($(this));\r\n        });\r\n\r\n        /**\r\n         * Review\r\n         */\r\n\r\n        wplngEditor.find('.wplng-mark-as-reviewed input[type=\"checkbox\"]').change(function () {\r\n\r\n            let parentSelector = wplngEditor.find(\"#wplng-translation-\" + $(this).attr(\"wplng-lang\"));\r\n\r\n            parentSelector.removeClass(\"wplng-status-generated\");\r\n            parentSelector.removeClass(\"wplng-status-reviewed\");\r\n            parentSelector.removeClass(\"wplng-status-ungenerated\");\r\n\r\n            if (this.checked) {\r\n                parentSelector.addClass(\"wplng-status-reviewed\");\r\n            } else {\r\n                parentSelector.addClass(\"wplng-status-generated\");\r\n            }\r\n        });\r\n\r\n        wplngEditor.find('.wplng-edit-language textarea').each(function () {\r\n            let reviewSelector = wplngEditor.find(\"#wplng_mark_as_reviewed_\" + $(this).attr(\"lang\"));\r\n            reviewSelector.prop(\"disabled\", $(this).val().trim() == \"\");\r\n        });\r\n\r\n        wplngEditor.find('.wplng-edit-language textarea').on(\"keyup paste\", function () {\r\n\r\n            let parentSelector = wplngEditor.find(\"#wplng-translation-\" + $(this).attr(\"lang\"));\r\n            let reviewSelector = wplngEditor.find(\"#wplng_mark_as_reviewed_\" + $(this).attr(\"lang\"));\r\n\r\n            parentSelector.removeClass(\"wplng-status-generated\");\r\n            parentSelector.removeClass(\"wplng-status-reviewed\");\r\n            parentSelector.removeClass(\"wplng-status-ungenerated\");\r\n\r\n            if ($(this).val().trim() == \"\") {\r\n                parentSelector.addClass(\"wplng-status-ungenerated\");\r\n                reviewSelector.prop(\"checked\", false);\r\n                reviewSelector.prop(\"disabled\", true);\r\n            } else {\r\n                parentSelector.addClass(\"wplng-status-reviewed\");\r\n                reviewSelector.prop(\"checked\", true);\r\n                reviewSelector.prop(\"disabled\", false);\r\n            }\r\n\r\n        });\r\n\r\n        /**\r\n         * Ajax translation\r\n         */\r\n\r\n        wplngEditor.find(\".wplng-generate-spin\").hide();\r\n\r\n        wplngEditor.find(\".wplng-generate\").on(\"click\", function () {\r\n\r\n            if (\"disabled\" == $(this).attr(\"disabled\")) {\r\n                return;\r\n            }\r\n\r\n            let source = wplngEditor.find(\"#wplng-original-language\").attr(\"wplng-lang\");\r\n            let target = wplngEditor.find(this).attr(\"wplng-lang\");\r\n            let text = wplngEditor.find(\"#wplng-source\").html();\r\n\r\n            if (undefined == source || undefined == target || undefined == text) {\r\n                return;\r\n            }\r\n\r\n            let container = \"#wplng-translation-\" + target;\r\n\r\n            wplngEditor.find(container + \" .wplng-generate\").attr(\"disabled\", true);\r\n            wplngEditor.find(container + \" .wplng-generate-spin\").show();\r\n\r\n            $.ajax({\r\n                url: wplngI18nTranslation.ajaxUrl,\r\n                method: 'POST',\r\n                data: {\r\n                    action: 'wplng_ajax_translation',\r\n                    text: text,\r\n                    language_source: source,\r\n                    language_target: target\r\n                },\r\n                success: function (data) {\r\n                    if (data.success) {\r\n                        let textarea = \"#wplng_translation_\" + target;\r\n                        $(textarea).val(data.data);\r\n\r\n                        if (data.data != \"\") {\r\n                            let parentSelector = wplngEditor.find(\"#wplng-translation-\" + target);\r\n                            let reviewSelector = wplngEditor.find(\"#wplng_mark_as_reviewed_\" + target);\r\n\r\n                            parentSelector.removeClass(\"wplng-status-generated\");\r\n                            parentSelector.removeClass(\"wplng-status-reviewed\");\r\n                            parentSelector.removeClass(\"wplng-status-ungenerated\");\r\n\r\n                            parentSelector.addClass(\"wplng-status-reviewed\");\r\n                            reviewSelector.prop(\"checked\", true);\r\n                            reviewSelector.prop(\"disabled\", false);\r\n                        }\r\n\r\n                        wplngResizeTextArea($(textarea));\r\n                        wplngCheckInputSignature();\r\n\r\n                        $(container + \" .wplng-generate-spin\").hide();\r\n\r\n                        setTimeout(function () {\r\n                            wplngEditor.find(container + \" .wplng-generate\").attr(\"disabled\", false);\r\n                        }, 8000);\r\n\r\n                    } else {\r\n                        console.log(\"wpLingua - Error:\");\r\n                        console.log(data);\r\n                        wplngEditor.find(container + \" .wplng-generate-spin\")\r\n                            .removeClass(\"dashicons-update\")\r\n                            .removeClass(\"wplng-spin\")\r\n                            .addClass(\"dashicons-no\");\r\n                    }\r\n                },\r\n                error: function (data) {\r\n                    console.log(\"wpLingua - Error:\");\r\n                    console.log(data);\r\n                    wplngEditor.find(container + \" .wplng-generate-spin\")\r\n                        .removeClass(\"dashicons-update\")\r\n                        .removeClass(\"wplng-spin\")\r\n                        .addClass(\"dashicons-no\");\r\n                }\r\n            });\r\n\r\n        });\r\n\r\n        /**\r\n         * Alert if page is leave without saving\r\n         * Disable / Enable save button\r\n         */\r\n\r\n        wplngEditor\r\n            .find(\".wplng-edit-language textarea, .wplng-edit-language input\")\r\n            .on(\"change input propertychange\", wplngCheckInputSignature);\r\n\r\n        $('#submitpost [type=submit], #wplng-modal-edit-save').click(function () {\r\n            wplngIsUpdatePost = true;\r\n        });\r\n\r\n        $(window).on('beforeunload', function () {\r\n            if (!wplngIsUpdatePost\r\n                && wplngInputSignature.onload != wplngInputSignature.now\r\n            ) {\r\n                return confirm(wplngI18nTranslation.message.exitPage);\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    /**\r\n     * Show all languages\r\n     */\r\n\r\n    $(\"#wplng-modal-edit-show-all\").on(\"click\", function () {\r\n        $(this).hide();\r\n        wplngEditor.find(\".wplng-edit-language\").show();\r\n    });\r\n\r\n\r\n    /**\r\n     * Alert if page is leave without saving\r\n     */\r\n\r\n    let wplngIsUpdatePost = false;\r\n    let wplngInputSignature = {\r\n        onload: wplngGetInputSignature(),\r\n        now: wplngGetInputSignature()\r\n    };\r\n\r\n    function wplngGetInputSignature() {\r\n\r\n        let signature = \"\";\r\n\r\n        wplngEditor.find(\".wplng-edit-language textarea\").each(function () {\r\n            signature += $(this).val();\r\n        });\r\n\r\n        wplngEditor.find(\".wplng-edit-language input[type=checkbox]\").each(function () {\r\n            signature += $(this).prop(\"checked\");\r\n        });\r\n\r\n        return signature;\r\n    }\r\n\r\n    function wplngCheckInputSignature() {\r\n\r\n        wplngInputSignature.now = wplngGetInputSignature();\r\n\r\n        if (wplngInputSignature.onload == wplngInputSignature.now) {\r\n            $(\"#wplng-modal-edit-save\").prop(\"disabled\", true);\r\n        } else {\r\n            $(\"#wplng-modal-edit-save\").prop(\"disabled\", false);\r\n        }\r\n    }\r\n\r\n\r\n    wplngUpdateEditorEvents();\r\n\r\n    /**\r\n     * Ajax edit modal\r\n     */\r\n\r\n    $(\".wplng-edit-link[data-wplng-post]\").click(wplngEdit);\r\n\r\n    function wplngEdit() {\r\n\r\n        $(\"#wplng-modal-edit-save\").text(wplngI18nTranslation.message.buttonSave);\r\n        $(\"#wplng-modal-edit-save\").prop(\"disabled\", true);\r\n\r\n        // Get post ID\r\n        let post = $(this).attr(\"data-wplng-post\");\r\n\r\n        // Get edit link\r\n        let editURL = $(\"#wplng-modal-edit-post\").attr(\"data-wplng-edit-template\");\r\n        editURL = editURL.replace('WPLNG_TRANSLATION_ID', post);\r\n\r\n        $.ajax({\r\n            url: wplngI18nTranslation.ajaxUrl,\r\n            method: 'POST',\r\n            data: {\r\n                action: 'wplng_ajax_edit_modal',\r\n                post_id: post\r\n            },\r\n            success: function (data) {\r\n                if (data.success) {\r\n\r\n                    // Put new HTML in modal\r\n                    let html = JSON.parse(data.data);\r\n                    html = wplngDecodeHtml(html.wplng_edit_html);\r\n                    wplngEditor.html(html);\r\n\r\n                    // Set edit URL\r\n                    $(\"#wplng-modal-edit-post\").attr(\"href\", editURL);\r\n\r\n                    // Show the editor modal\r\n                    $(\"#wplng-modal-edit-container\").show();\r\n\r\n                    // Hide translation list modal\r\n                    $(\"#wplng-modal-container\").hide();\r\n\r\n                    // Update save button\r\n                    $(\"#wplng-modal-edit-save\").attr(\"data-wplng-post\", post);\r\n\r\n                    // Hide \"All languages\" button if only one target language\r\n                    if (wplngEditor.find(\".wplng-edit-language\").length == 1) {\r\n                        $(\"#wplng-modal-edit-show-all\").hide();\r\n                    } else {\r\n                        $(\"#wplng-modal-edit-show-all\").show();\r\n                    }\r\n\r\n                    // Reload events\r\n                    wplngUpdateEditorEvents();\r\n\r\n                    // Hide not current languages\r\n                    let languagesToHide = \".wplng-edit-language:not([wplng-lang=\";\r\n                    languagesToHide += wplngI18nTranslation.currentLanguage;\r\n                    languagesToHide += \"])\";\r\n\r\n                    wplngEditor.find(languagesToHide).hide();\r\n\r\n                } else {\r\n                    console.log(\"wpLingua - Error:\");\r\n                    console.log(data);\r\n                }\r\n            },\r\n            error: function (data) {\r\n                console.log(\"wpLingua - Error:\");\r\n                console.log(data);\r\n            }\r\n        });\r\n    }\r\n\r\n    $(\"#wplng-modal-edit-return\").click(function () {\r\n        if (wplngInputSignature.onload != wplngInputSignature.now) {\r\n            if (confirm(wplngI18nTranslation.message.exitEditorModal)) {\r\n                wplngCloseEditorModal();\r\n            }\r\n        } else {\r\n            wplngCloseEditorModal();\r\n        }\r\n    });\r\n\r\n    /**\r\n     * Save edited translation\r\n     */\r\n\r\n    $(\"#wplng-modal-edit-save\").click(function () {\r\n\r\n        $(\"#wplng-modal-edit-save\").text(wplngI18nTranslation.message.buttonSaveInProgress);\r\n\r\n        let text = $(this).text();\r\n        let post = $(this).attr(\"data-wplng-post\");\r\n        let data = {\r\n            action: 'wplng_ajax_save_modal',\r\n            post_id: post,\r\n            wplng_translation_meta_box_nonce: wplngEditor.find('#wplng_translation_meta_box_nonce').val(),\r\n        };\r\n\r\n        wplngEditor.find(\".wplng-translation-textarea\").each(function () {\r\n            let id = $(this).attr('id');\r\n            data[id] = $(this).val();\r\n\r\n            if (('wplng_translation_' + wplngI18nTranslation.currentLanguage) == id) {\r\n                text = $(this).val();\r\n            }\r\n        });\r\n\r\n        let isReview = (true == $(\"#wplng_mark_as_reviewed_\" + wplngI18nTranslation.currentLanguage).prop(\"checked\"));\r\n\r\n        wplngEditor.find(\".wplng-mark-as-reviewed input[type=checkbox]\").each(function () {\r\n            data[$(this).attr('id')] = $(this).prop(\"checked\");\r\n        });\r\n\r\n        $.ajax({\r\n            url: wplngI18nTranslation.ajaxUrl,\r\n            method: 'POST',\r\n            data: data,\r\n            success: function (data) {\r\n                if (data.success) {\r\n\r\n                    let editLink = $(\"body.wplingua-editor .wplng-edit-link[data-wplng-post=\" + post + \"]\");\r\n                    let modalItem = $(\"body.wplingua-list .wplng-modal-item[data-wplng-post=\" + post + \"]\")\r\n\r\n                    // replace by new text in page\r\n                    editLink.text(text);\r\n                    modalItem.find(\".wplng-item-translation\").text(text);\r\n\r\n                    // Add or remove wplng-is-review class\r\n                    if (isReview) {\r\n                        editLink.addClass('wplng-is-review');\r\n                        modalItem.addClass('wplng-is-review');\r\n                    } else {\r\n                        editLink.removeClass('wplng-is-review');\r\n                        modalItem.removeClass('wplng-is-review');\r\n                    }\r\n\r\n                    // Hide the editor modal\r\n                    wplngCloseEditorModal();\r\n\r\n                } else {\r\n                    console.log(\"wpLingua - Error:\");\r\n                    console.log(data);\r\n                }\r\n            },\r\n            error: function (data) {\r\n                console.log(\"wpLingua - Error:\");\r\n                console.log(data);\r\n            }\r\n        });\r\n    });\r\n\r\n\r\n    /**\r\n     * Search\r\n     */\r\n\r\n    $(\"#wplng-filter-search, #wplng-filter-status\").on('input', wplngFilterSearch);\r\n\r\n    function wplngFilterSearch() {\r\n\r\n        let status = $(\"#wplng-filter-status\").val();\r\n\r\n        let searched = $(\"#wplng-filter-search\").val();\r\n        searched = searched.trim().toLowerCase();\r\n\r\n        $(\".wplng-modal-item\").each(function (key) {\r\n\r\n            let text_translation = $(this).find(\".wplng-item-translation\").html();\r\n            let text_source = $(this).find(\".wplng-item-source\").html();\r\n\r\n            text_translation = text_translation.toLowerCase();\r\n            text_source = text_source.toLowerCase();\r\n\r\n            let is_show_search = searched == \"\";\r\n            is_show_search = is_show_search || text_translation.indexOf(searched) >= 0;\r\n            is_show_search = is_show_search || text_source.indexOf(searched) >= 0;\r\n\r\n\r\n            let is_show_status = status == \"all\";\r\n            is_show_status = is_show_status || (status == \"reviewed\" && $(this).hasClass(\"wplng-is-review\"));\r\n            is_show_status = is_show_status || (status == \"unreviewed\" && !$(this).hasClass(\"wplng-is-review\"));\r\n\r\n            if (is_show_search && is_show_status) {\r\n                $(this).show();\r\n            } else {\r\n                $(this).hide();\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    /**\r\n     * Ordering\r\n     */\r\n\r\n    $(\"#wplng-filter-order\").on('input', wplngFilterOrdering);\r\n\r\n    function wplngFilterOrdering() {\r\n\r\n        let order = $(\"#wplng-filter-order\").val();\r\n        let items = [];\r\n        let html = \"\";\r\n\r\n        switch (order) {\r\n            case \"alphabetical-sources\":\r\n                items = wplngSortAlphabetical(\r\n                    \".wplng-modal-item\",\r\n                    \".wplng-item-source\"\r\n                );\r\n                break;\r\n\r\n            case \"alphabetical-translations\":\r\n                items = wplngSortAlphabetical(\r\n                    \".wplng-modal-item\",\r\n                    \".wplng-item-translation\"\r\n                );\r\n                break;\r\n\r\n            default: // occurrence\r\n                items = wplngSortNumber(\r\n                    \".wplng-modal-item\",\r\n                    \"data-wplng-order\"\r\n                );\r\n                break;\r\n        }\r\n\r\n\r\n\r\n        items.each(function (key) {\r\n            html += $(this).prop('outerHTML');\r\n        });\r\n\r\n        $(\"#wplng-modal-items\").html(html);\r\n\r\n        $(\"#wplng-modal-items\").find(\".wplng-edit-link[data-wplng-post]\").click(wplngEdit);\r\n\r\n    }\r\n\r\n    function wplngSortAlphabetical(selectorParent, selectorText) {\r\n        return $($(selectorParent).toArray().sort(function (a, b) {\r\n\r\n            let aVal = $(a).find(selectorText).text();\r\n            let bVal = $(b).find(selectorText).text();\r\n\r\n            let returned = 0;\r\n            if (aVal < bVal) {\r\n                returned = -1;\r\n            } else if (aVal > bVal) {\r\n                returned = 1;\r\n            }\r\n\r\n            return returned;\r\n        }));\r\n    }\r\n\r\n    function wplngSortNumber(selectorParent, attrName) {\r\n        return $($(selectorParent).toArray().sort(function (a, b) {\r\n            let aVal = parseInt(a.getAttribute(attrName)),\r\n                bVal = parseInt(b.getAttribute(attrName));\r\n            return aVal - bVal;\r\n        }));\r\n    }\r\n\r\n\r\n}); // End jQuery loaded event"],"names":["jQuery","document","ready","$","let","wplngEditor","wplngResizeTextArea","$element","height","scrollHeight","wplngCloseEditorModal","hide","prop","show","wplngInputSignature","onload","now","wplngToggleGoToTopButton","scrollTop","fadeIn","fadeOut","wplngUpdateEditorEvents","wplngIsUpdatePost","wplngGetInputSignature","wplngTextArea","find","off","on","this","window","resize","each","change","parentSelector","attr","removeClass","checked","addClass","val","trim","reviewSelector","source","target","text","html","undefined","container","ajax","url","wplngI18nTranslation","ajaxUrl","method","data","action","language_source","language_target","success","textarea","wplngCheckInputSignature","setTimeout","console","log","error","click","confirm","message","exitPage","scroll","animate","signature","wplngEdit","buttonSave","post","editURL","replace","post_id","languagesToHide","string","returnText","JSON","parse","wplng_edit_html","length","currentLanguage","wplngSortAlphabetical","selectorParent","selectorText","toArray","sort","a","b","aVal","bVal","returned","exitEditorModal","buttonSaveInProgress","wplng_translation_meta_box_nonce","isReview","id","editLink","modalItem","status","searched","toLowerCase","key","text_translation","text_source","is_show_search","is_show_status","indexOf","hasClass","order","items","attrName","parseInt","getAttribute"],"mappings":";;;;;;;;;;;;;;;IAiBAA;OAAOC,QAAQ,EAAEC,MAAM,SAAUC,GAE7BC,IAAIC,EAAcF,EAAE,2BAA2B,EAiB/C,SAASG,EAAoBC,GACzBA,EAASC,OAAO,CAAC,EACjBD,EAASC,OAAOD,EAAS,GAAGE,aAAe,CAAC,CAChD,CAkBA,SAASC,IACLP,EAAE,6BAA6B,EAAEQ,KAAK,EACtCR,EAAE,wBAAwB,EAAES,KAAK,WAAY,CAAA,CAAK,EAClDT,EAAE,wBAAwB,EAAEU,KAAK,EACjCC,EAAoBC,OAAS,GAC7BD,EAAoBE,IAAM,EAC9B,CAMA,SAASC,IACyC,EAA1Cd,EAAE,wBAAwB,EAAEe,UAAU,EACtCf,EAAE,sBAAsB,EAAEgB,OAAO,GAAG,EAEpChB,EAAE,sBAAsB,EAAEiB,QAAQ,GAAG,CAE7C,CAaA,SAASC,IAELC,EAAoB,CAAA,EACpBR,EAAsB,CAClBC,OAAQQ,EAAuB,EAC/BP,IAAKO,EAAuB,CAChC,EAMAnB,IAAIoB,EAAgBnB,EAAYoB,KAAK,+BAA+B,EAEpED,EAAcE,IAAI,gBAAgB,EAAEC,GAAG,iBAAkB,WACrDrB,EAAoBH,EAAEyB,IAAI,CAAC,CAC/B,CAAC,EAEDzB,EAAE0B,MAAM,EAAEC,OAAO,WACbN,EAAcO,KAAK,WACfzB,EAAoBH,EAAEyB,IAAI,CAAC,CAC/B,CAAC,CACL,CAAC,EAEDJ,EAAcO,KAAK,WACfzB,EAAoBH,EAAEyB,IAAI,CAAC,CAC/B,CAAC,EAMDvB,EAAYoB,KAAK,gDAAgD,EAAEO,OAAO,WAEtE5B,IAAI6B,EAAiB5B,EAAYoB,KAAK,sBAAwBtB,EAAEyB,IAAI,EAAEM,KAAK,YAAY,CAAC,EAExFD,EAAeE,YAAY,wBAAwB,EACnDF,EAAeE,YAAY,uBAAuB,EAClDF,EAAeE,YAAY,0BAA0B,EAEjDP,KAAKQ,QACLH,EAAeI,SAAS,uBAAuB,EAE/CJ,EAAeI,SAAS,wBAAwB,CAExD,CAAC,EAEDhC,EAAYoB,KAAK,+BAA+B,EAAEM,KAAK,WAC9B1B,EAAYoB,KAAK,2BAA6BtB,EAAEyB,IAAI,EAAEM,KAAK,MAAM,CAAC,EACxEtB,KAAK,WAAoC,IAAxBT,EAAEyB,IAAI,EAAEU,IAAI,EAAEC,KAAK,CAAO,CAC9D,CAAC,EAEDlC,EAAYoB,KAAK,+BAA+B,EAAEE,GAAG,cAAe,WAEhEvB,IAAI6B,EAAiB5B,EAAYoB,KAAK,sBAAwBtB,EAAEyB,IAAI,EAAEM,KAAK,MAAM,CAAC,EAC9EM,EAAiBnC,EAAYoB,KAAK,2BAA6BtB,EAAEyB,IAAI,EAAEM,KAAK,MAAM,CAAC,EAEvFD,EAAeE,YAAY,wBAAwB,EACnDF,EAAeE,YAAY,uBAAuB,EAClDF,EAAeE,YAAY,0BAA0B,EAEzB,IAAxBhC,EAAEyB,IAAI,EAAEU,IAAI,EAAEC,KAAK,GACnBN,EAAeI,SAAS,0BAA0B,EAClDG,EAAe5B,KAAK,UAAW,CAAA,CAAK,EACpC4B,EAAe5B,KAAK,WAAY,CAAA,CAAI,IAEpCqB,EAAeI,SAAS,uBAAuB,EAC/CG,EAAe5B,KAAK,UAAW,CAAA,CAAI,EACnC4B,EAAe5B,KAAK,WAAY,CAAA,CAAK,EAG7C,CAAC,EAMDP,EAAYoB,KAAK,sBAAsB,EAAEd,KAAK,EAE9CN,EAAYoB,KAAK,iBAAiB,EAAEE,GAAG,QAAS,WAE5C,GAAI,YAAcxB,EAAEyB,IAAI,EAAEM,KAAK,UAAU,EAAzC,CAIA9B,IAAIqC,EAASpC,EAAYoB,KAAK,0BAA0B,EAAES,KAAK,YAAY,EAC3E9B,IAAIsC,EAASrC,EAAYoB,KAAKG,IAAI,EAAEM,KAAK,YAAY,EACrD9B,IAAIuC,EAAOtC,EAAYoB,KAAK,eAAe,EAAEmB,KAAK,EAElD,GAAIC,MAAaJ,GAAUI,MAAaH,GAAUG,MAAaF,EAA/D,CAIAvC,IAAI0C,EAAY,sBAAwBJ,EAExCrC,EAAYoB,KAAKqB,EAAY,kBAAkB,EAAEZ,KAAK,WAAY,CAAA,CAAI,EACtE7B,EAAYoB,KAAKqB,EAAY,uBAAuB,EAAEjC,KAAK,EAE3DV,EAAE4C,KAAK,CACHC,IAAKC,qBAAqBC,QAC1BC,OAAQ,OACRC,KAAM,CACFC,OAAQ,yBACRV,KAAMA,EACNW,gBAAiBb,EACjBc,gBAAiBb,CACrB,EACAc,QAAS,SAAUJ,GACf,IACQK,EAIIxB,EACAO,EANRY,EAAKI,SACDC,EAAW,sBAAwBf,EACvCvC,EAAEsD,CAAQ,EAAEnB,IAAIc,EAAKA,IAAI,EAER,IAAbA,EAAKA,OACDnB,EAAiB5B,EAAYoB,KAAK,sBAAwBiB,CAAM,EAChEF,EAAiBnC,EAAYoB,KAAK,2BAA6BiB,CAAM,EAEzET,EAAeE,YAAY,wBAAwB,EACnDF,EAAeE,YAAY,uBAAuB,EAClDF,EAAeE,YAAY,0BAA0B,EAErDF,EAAeI,SAAS,uBAAuB,EAC/CG,EAAe5B,KAAK,UAAW,CAAA,CAAI,EACnC4B,EAAe5B,KAAK,WAAY,CAAA,CAAK,GAGzCN,EAAoBH,EAAEsD,CAAQ,CAAC,EAC/BC,EAAyB,EAEzBvD,EAAE2C,EAAY,uBAAuB,EAAEnC,KAAK,EAE5CgD,WAAW,WACPtD,EAAYoB,KAAKqB,EAAY,kBAAkB,EAAEZ,KAAK,WAAY,CAAA,CAAK,CAC3E,EAAG,GAAI,IAGP0B,QAAQC,IAAI,mBAAmB,EAC/BD,QAAQC,IAAIT,CAAI,EAChB/C,EAAYoB,KAAKqB,EAAY,uBAAuB,EAC/CX,YAAY,kBAAkB,EAC9BA,YAAY,YAAY,EACxBE,SAAS,cAAc,EAEpC,EACAyB,MAAO,SAAUV,GACbQ,QAAQC,IAAI,mBAAmB,EAC/BD,QAAQC,IAAIT,CAAI,EAChB/C,EAAYoB,KAAKqB,EAAY,uBAAuB,EAC/CX,YAAY,kBAAkB,EAC9BA,YAAY,YAAY,EACxBE,SAAS,cAAc,CAChC,CACJ,CAAC,CA5DD,CARA,CAsEJ,CAAC,EAODhC,EACKoB,KAAK,2DAA2D,EAChEE,GAAG,8BAA+B+B,CAAwB,EAE/DvD,EAAE,mDAAmD,EAAE4D,MAAM,WACzDzC,EAAoB,CAAA,CACxB,CAAC,EAEDnB,EAAE0B,MAAM,EAAEF,GAAG,eAAgB,WACzB,GAAI,CAACL,GACER,EAAoBC,QAAUD,EAAoBE,IAErD,OAAOgD,QAAQf,qBAAqBgB,QAAQC,QAAQ,CAE5D,CAAC,CAEL,CA/OA/D,EAAE,kCAAkC,EAC/BgC,YAAY,wBAAwB,EACpCE,SAAS,wBAAwB,EAEtClC,EAAE,mCAAmC,EAChCkC,SAAS,cAAc,EACvBA,SAAS,wBAAwB,EA8CtCpB,EAAyB,EACzBd,EAAE,wBAAwB,EAAEgE,OAAOlD,CAAwB,EAE3Dd,EAAE,sBAAsB,EAAE4D,MAAM,WAC5B5D,EAAE,wBAAwB,EAAEiE,QAAQ,CAAElD,UAAW,CAAE,EAAG,GAAG,CAC7D,CAAC,EA4LDf,EAAE,4BAA4B,EAAEwB,GAAG,QAAS,WACxCxB,EAAEyB,IAAI,EAAEjB,KAAK,EACbN,EAAYoB,KAAK,sBAAsB,EAAEZ,KAAK,CAClD,CAAC,EAODT,IAAIkB,EAAoB,CAAA,EACpBR,EAAsB,CACtBC,OAAQQ,EAAuB,EAC/BP,IAAKO,EAAuB,CAChC,EAEA,SAASA,IAELnB,IAAIiE,EAAY,GAUhB,OARAhE,EAAYoB,KAAK,+BAA+B,EAAEM,KAAK,WACnDsC,GAAalE,EAAEyB,IAAI,EAAEU,IAAI,CAC7B,CAAC,EAEDjC,EAAYoB,KAAK,2CAA2C,EAAEM,KAAK,WAC/DsC,GAAalE,EAAEyB,IAAI,EAAEhB,KAAK,SAAS,CACvC,CAAC,EAEMyD,CACX,CAEA,SAASX,IAEL5C,EAAoBE,IAAMO,EAAuB,EAE7CT,EAAoBC,QAAUD,EAAoBE,IAClDb,EAAE,wBAAwB,EAAES,KAAK,WAAY,CAAA,CAAI,EAEjDT,EAAE,wBAAwB,EAAES,KAAK,WAAY,CAAA,CAAK,CAE1D,CAWA,SAAS0D,IAELnE,EAAE,wBAAwB,EAAEwC,KAAKM,qBAAqBgB,QAAQM,UAAU,EACxEpE,EAAE,wBAAwB,EAAES,KAAK,WAAY,CAAA,CAAI,EAGjDR,IAAIoE,EAAOrE,EAAEyB,IAAI,EAAEM,KAAK,iBAAiB,EAGrCuC,EAAUtE,EAAE,wBAAwB,EAAE+B,KAAK,0BAA0B,EACzEuC,EAAUA,EAAQC,QAAQ,uBAAwBF,CAAI,EAEtDrE,EAAE4C,KAAK,CACHC,IAAKC,qBAAqBC,QAC1BC,OAAQ,OACRC,KAAM,CACFC,OAAQ,wBACRsB,QAASH,CACb,EACAhB,QAAS,SAAUJ,GACf,IAgCIwB,EAhCAxB,EAAKI,SAILZ,EA7ShB,SAAyBiC,GACrBzE,IAAI0E,EAAaD,EAMjB,OADAC,GADAA,GADAA,GADAA,GADAA,EAAaA,EAAWJ,QAAQ,WAAY,GAAG,GACvBA,QAAQ,UAAW,GAAG,GACtBA,QAAQ,WAAY,GAAG,GACvBA,QAAQ,SAAU,GAAG,GACrBA,QAAQ,SAAU,GAAG,CAEjD,GAqSuC9B,EADZmC,KAAKC,MAAM5B,EAAKA,IAAI,GACH6B,eAAe,EAC3C5E,EAAYuC,KAAKA,CAAI,EAGrBzC,EAAE,wBAAwB,EAAE+B,KAAK,OAAQuC,CAAO,EAGhDtE,EAAE,6BAA6B,EAAEU,KAAK,EAGtCV,EAAE,wBAAwB,EAAEQ,KAAK,EAGjCR,EAAE,wBAAwB,EAAE+B,KAAK,kBAAmBsC,CAAI,EAGD,GAAnDnE,EAAYoB,KAAK,sBAAsB,EAAEyD,OACzC/E,EAAE,4BAA4B,EAAEQ,KAAK,EAErCR,EAAE,4BAA4B,EAAEU,KAAK,EAIzCQ,EAAwB,EAKxBuD,GADAA,EADsB,yCACH3B,qBAAqBkC,gBACrB,KAEnB9E,EAAYoB,KAAKmD,CAAe,EAAEjE,KAAK,IAGvCiD,QAAQC,IAAI,mBAAmB,EAC/BD,QAAQC,IAAIT,CAAI,EAExB,EACAU,MAAO,SAAUV,GACbQ,QAAQC,IAAI,mBAAmB,EAC/BD,QAAQC,IAAIT,CAAI,CACpB,CACJ,CAAC,CACL,CAwKA,SAASgC,EAAsBC,EAAgBC,GAC3C,OAAOnF,EAAEA,EAAEkF,CAAc,EAAEE,QAAQ,EAAEC,KAAK,SAAUC,EAAGC,GAE/CC,EAAOxF,EAAEsF,CAAC,EAAEhE,KAAK6D,CAAY,EAAE3C,KAAK,EACpCiD,EAAOzF,EAAEuF,CAAC,EAAEjE,KAAK6D,CAAY,EAAE3C,KAAK,EAExCvC,IAAIyF,EAAW,EAOf,OANIF,EAAOC,EACPC,EAAW,CAAC,EACED,EAAPD,IACPE,EAAW,GAGRA,CACX,CAAC,CAAC,CACN,CAjQAxE,EAAwB,EAMxBlB,EAAE,mCAAmC,EAAE4D,MAAMO,CAAS,EAsEtDnE,EAAE,0BAA0B,EAAE4D,MAAM,YAC5BjD,EAAoBC,QAAUD,EAAoBE,KAC9CgD,QAAQf,qBAAqBgB,QAAQ6B,eAAe,IAIxDpF,EAAsB,CAE9B,CAAC,EAMDP,EAAE,wBAAwB,EAAE4D,MAAM,WAE9B5D,EAAE,wBAAwB,EAAEwC,KAAKM,qBAAqBgB,QAAQ8B,oBAAoB,EAElF3F,IAAIuC,EAAOxC,EAAEyB,IAAI,EAAEe,KAAK,EACpB6B,EAAOrE,EAAEyB,IAAI,EAAEM,KAAK,iBAAiB,EACrCkB,EAAO,CACPC,OAAQ,wBACRsB,QAASH,EACTwB,iCAAkC3F,EAAYoB,KAAK,mCAAmC,EAAEa,IAAI,CAChG,EAWI2D,GATJ5F,EAAYoB,KAAK,6BAA6B,EAAEM,KAAK,WACjD3B,IAAI8F,EAAK/F,EAAEyB,IAAI,EAAEM,KAAK,IAAI,EAC1BkB,EAAK8C,GAAM/F,EAAEyB,IAAI,EAAEU,IAAI,EAElB,qBAAuBW,qBAAqBkC,iBAAoBe,IACjEvD,EAAOxC,EAAEyB,IAAI,EAAEU,IAAI,EAE3B,CAAC,EAEe,GAAQnC,EAAE,2BAA6B8C,qBAAqBkC,eAAe,EAAEvE,KAAK,SAAS,GAE3GP,EAAYoB,KAAK,8CAA8C,EAAEM,KAAK,WAClEqB,EAAKjD,EAAEyB,IAAI,EAAEM,KAAK,IAAI,GAAK/B,EAAEyB,IAAI,EAAEhB,KAAK,SAAS,CACrD,CAAC,EAEDT,EAAE4C,KAAK,CACHC,IAAKC,qBAAqBC,QAC1BC,OAAQ,OACRC,KAAMA,EACNI,QAAS,SAAUJ,GACf,IAEQ+C,EACAC,EAHJhD,EAAKI,SAED2C,EAAWhG,EAAE,yDAA2DqE,EAAO,GAAG,EAClF4B,EAAYjG,EAAE,wDAA0DqE,EAAO,GAAG,EAGtF2B,EAASxD,KAAKA,CAAI,EAClByD,EAAU3E,KAAK,yBAAyB,EAAEkB,KAAKA,CAAI,EAG/CsD,GACAE,EAAS9D,SAAS,iBAAiB,EACnC+D,EAAU/D,SAAS,iBAAiB,IAEpC8D,EAAShE,YAAY,iBAAiB,EACtCiE,EAAUjE,YAAY,iBAAiB,GAI3CzB,EAAsB,IAGtBkD,QAAQC,IAAI,mBAAmB,EAC/BD,QAAQC,IAAIT,CAAI,EAExB,EACAU,MAAO,SAAUV,GACbQ,QAAQC,IAAI,mBAAmB,EAC/BD,QAAQC,IAAIT,CAAI,CACpB,CACJ,CAAC,CACL,CAAC,EAODjD,EAAE,4CAA4C,EAAEwB,GAAG,QAEnD,WAEIvB,IAAIiG,EAASlG,EAAE,sBAAsB,EAAEmC,IAAI,EAEvCgE,EAAWnG,EAAE,sBAAsB,EAAEmC,IAAI,EAC7CgE,EAAWA,EAAS/D,KAAK,EAAEgE,YAAY,EAEvCpG,EAAE,mBAAmB,EAAE4B,KAAK,SAAUyE,GAElCpG,IAAIqG,EAAmBtG,EAAEyB,IAAI,EAAEH,KAAK,yBAAyB,EAAEmB,KAAK,EAChE8D,EAAcvG,EAAEyB,IAAI,EAAEH,KAAK,oBAAoB,EAAEmB,KAAK,EAK1DxC,IACAuG,EAKAC,EATAH,EAAmBA,EAAiBF,YAAY,EAChDG,EAAcA,EAAYH,YAAY,EAItCI,EAFiC,IAAZL,GACoD,GAAtCG,EAAiBI,QAAQP,CAAQ,GACA,GAAjCI,EAAYG,QAAQP,CAAQ,EAK/DM,EAF+B,OAAVP,GACyB,YAAVA,GAAwBlG,EAAEyB,IAAI,EAAEkF,SAAS,iBAAiB,GAChD,cAAVT,GAA0B,CAAClG,EAAEyB,IAAI,EAAEkF,SAAS,iBAAiB,EAE7FH,GAAkBC,EAClBzG,EAAEyB,IAAI,EAAEf,KAAK,EAEbV,EAAEyB,IAAI,EAAEjB,KAAK,CAErB,CAAC,CAEL,CAjC6E,EAuC7ER,EAAE,qBAAqB,EAAEwB,GAAG,QAE5B,WAEIvB,IAAI2G,EAAQ5G,EAAE,qBAAqB,EAAEmC,IAAI,EACrC0E,EAAQ,GACRpE,EAAO,GAEX,OAAQmE,GACJ,IAAK,uBACDC,EAAQ5B,EACJ,oBACA,oBACJ,EACA,MAEJ,IAAK,4BACD4B,EAAQ5B,EACJ,oBACA,yBACJ,EACA,MAEJ,QACI4B,EAoCZ,SAAyB3B,EAAgB4B,GACrC,OAAO9G,EAAEA,EAAEkF,CAAc,EAAEE,QAAQ,EAAEC,KAAK,SAAUC,EAAGC,GAGnD,OAFWwB,SAASzB,EAAE0B,aAAaF,CAAQ,CAAC,EACjCC,SAASxB,EAAEyB,aAAaF,CAAQ,CAAC,CAEhD,CAAC,CAAC,CACN,EAzCgB,oBACA,kBACJ,CAER,CAIAD,EAAMjF,KAAK,SAAUyE,GACjB5D,GAAQzC,EAAEyB,IAAI,EAAEhB,KAAK,WAAW,CACpC,CAAC,EAEDT,EAAE,oBAAoB,EAAEyC,KAAKA,CAAI,EAEjCzC,EAAE,oBAAoB,EAAEsB,KAAK,mCAAmC,EAAEsC,MAAMO,CAAS,CAErF,CAzCwD,CAqE5D,CAAC"}