{"version":3,"file":"admin/slug.js","sources":["admin/slug.js"],"sourcesContent":["/*!*\r\n **                 _     _                         \r\n ** __      ___ __ | |   (_)_ __   __ _ _   _  __ _ \r\n ** \\ \\ /\\ / / '_ \\| |   | | '_ \\ / _` | | | |/ _` |\r\n **  \\ V  V /| |_) | |___| | | | | (_| | |_| | (_| |\r\n **   \\_/\\_/ | .__/|_____|_|_| |_|\\__, |\\__,_|\\__,_|\r\n **          |_|                  |___/             \r\n **\r\n **        -- wpLingua | WordPress plugin --\r\n **   Translate and make your website multilingual\r\n **\r\n **     https://github.com/julien-jacob/wplingua\r\n **      https://wordpress.org/plugins/wplingua/\r\n **              https://wplingua.com/\r\n **\r\n **/\r\n\r\njQuery(document).ready(function ($) {\r\n\r\n    let wplngEditor = $(\"#wplng-slug-editor\");\r\n\r\n    /**\r\n     * Epand wpLingua sub-menu\r\n     */\r\n\r\n    $(\"#toplevel_page_wplingua-settings\")\r\n        .removeClass(\"wp-not-current-submenu\")\r\n        .addClass(\"wp-has-current-submenu\");\r\n\r\n    $(\"a.toplevel_page_wplingua-settings\")\r\n        .addClass(\"wp-menu-open\")\r\n        .addClass(\"wp-has-current-submenu\");\r\n\r\n    /**\r\n     * Prepare all events and default value on slug editor\r\n     */\r\n    function wplngUpdateEditorEvents() {\r\n\r\n        wplngIsUpdatePost = false;\r\n        wplngInputSignature = {\r\n            onload: wplngGetInputSignature(),\r\n            now: wplngGetInputSignature()\r\n        };\r\n\r\n        /**\r\n         * Review\r\n         */\r\n\r\n        wplngEditor.find('.wplng-mark-as-reviewed input[type=\"checkbox\"]').change(function () {\r\n\r\n            let parentSelector = wplngEditor.find(\"#wplng-slug-\" + $(this).attr(\"wplng-lang\"));\r\n\r\n            parentSelector.removeClass(\"wplng-status-generated\");\r\n            parentSelector.removeClass(\"wplng-status-reviewed\");\r\n            parentSelector.removeClass(\"wplng-status-ungenerated\");\r\n\r\n            if (this.checked) {\r\n                parentSelector.addClass(\"wplng-status-reviewed\");\r\n            } else {\r\n                parentSelector.addClass(\"wplng-status-generated\");\r\n            }\r\n        });\r\n\r\n        wplngEditor.find('.wplng-edit-language .wplng-slug-input').each(function () {\r\n            let reviewSelector = wplngEditor.find(\"#wplng_mark_as_reviewed_\" + $(this).attr(\"lang\"));\r\n            reviewSelector.prop(\"disabled\", $(this).val().trim() == \"\");\r\n        });\r\n\r\n        wplngEditor.find('.wplng-edit-language .wplng-slug-input').on(\"keyup paste\", function () {\r\n\r\n            let parentSelector = wplngEditor.find(\"#wplng-slug-\" + $(this).attr(\"lang\"));\r\n            let reviewSelector = wplngEditor.find(\"#wplng_mark_as_reviewed_\" + $(this).attr(\"lang\"));\r\n\r\n            parentSelector.removeClass(\"wplng-status-generated\");\r\n            parentSelector.removeClass(\"wplng-status-reviewed\");\r\n            parentSelector.removeClass(\"wplng-status-ungenerated\");\r\n\r\n            if ($(this).val().trim() == \"\") {\r\n                parentSelector.addClass(\"wplng-status-ungenerated\");\r\n                reviewSelector.prop(\"checked\", false);\r\n                reviewSelector.prop(\"disabled\", true);\r\n            } else {\r\n                parentSelector.addClass(\"wplng-status-reviewed\");\r\n                reviewSelector.prop(\"checked\", true);\r\n                reviewSelector.prop(\"disabled\", false);\r\n            }\r\n\r\n        });\r\n\r\n        /**\r\n         * Ajax slug\r\n         */\r\n\r\n        wplngEditor.find(\".wplng-generate-spin\").hide();\r\n\r\n        wplngEditor.find(\".wplng-generate\").on(\"click\", function () {\r\n\r\n            if (\"disabled\" == $(this).attr(\"disabled\")) {\r\n                return;\r\n            }\r\n\r\n            let source = wplngEditor.find(\"#wplng-original-language\").attr(\"wplng-lang\");\r\n            let target = wplngEditor.find(this).attr(\"wplng-lang\");\r\n            let text = wplngEditor.find(\"#wplng-source\").html();\r\n\r\n            if (undefined == source || undefined == target || undefined == text) {\r\n                return;\r\n            }\r\n\r\n            let container = \"#wplng-slug-\" + target;\r\n\r\n            wplngEditor.find(container + \" .wplng-generate\").attr(\"disabled\", true);\r\n            wplngEditor.find(container + \" .wplng-generate-spin\").show();\r\n\r\n            $.ajax({\r\n                url: wplngI18nSlug.ajaxUrl,\r\n                method: 'POST',\r\n                data: {\r\n                    action: 'wplng_ajax_slug',\r\n                    text: text,\r\n                    language_source: source,\r\n                    language_target: target\r\n                },\r\n                success: function (data) {\r\n                    if (data.success) {\r\n                        let textarea = \"#wplng_slug_\" + target;\r\n                        $(textarea).val(data.data);\r\n\r\n                        if (data.data != \"\") {\r\n                            let parentSelector = wplngEditor.find(\"#wplng-slug-\" + target);\r\n                            let reviewSelector = wplngEditor.find(\"#wplng_mark_as_reviewed_\" + target);\r\n\r\n                            parentSelector.removeClass(\"wplng-status-generated\");\r\n                            parentSelector.removeClass(\"wplng-status-reviewed\");\r\n                            parentSelector.removeClass(\"wplng-status-ungenerated\");\r\n\r\n                            parentSelector.addClass(\"wplng-status-reviewed\");\r\n                            reviewSelector.prop(\"checked\", true);\r\n                            reviewSelector.prop(\"disabled\", false);\r\n                        }\r\n\r\n                        wplngCheckInputSignature();\r\n\r\n                        $(container + \" .wplng-generate-spin\").hide();\r\n\r\n                        setTimeout(function () {\r\n                            wplngEditor.find(container + \" .wplng-generate\").attr(\"disabled\", false);\r\n                        }, 8000);\r\n\r\n                    } else {\r\n                        console.log(\"wpLingua - Error:\");\r\n                        console.log(data);\r\n                        wplngEditor.find(container + \" .wplng-generate-spin\")\r\n                            .removeClass(\"dashicons-update\")\r\n                            .removeClass(\"wplng-spin\")\r\n                            .addClass(\"dashicons-no\");\r\n                    }\r\n                },\r\n                error: function (data) {\r\n                    console.log(\"wpLingua - Error:\");\r\n                    console.log(data);\r\n                    wplngEditor.find(container + \" .wplng-generate-spin\")\r\n                        .removeClass(\"dashicons-update\")\r\n                        .removeClass(\"wplng-spin\")\r\n                        .addClass(\"dashicons-no\");\r\n                }\r\n            });\r\n\r\n        });\r\n\r\n        /**\r\n         * Alert if page is leave without saving\r\n         * Disable / Enable save button\r\n         */\r\n\r\n        wplngEditor\r\n            .find(\".wplng-edit-language textarea, .wplng-edit-language input\")\r\n            .on(\"change input propertychange\", wplngCheckInputSignature);\r\n\r\n        $('#submitpost [type=submit], #wplng-modal-edit-save').click(function () {\r\n            wplngIsUpdatePost = true;\r\n        });\r\n\r\n        $(window).on('beforeunload', function () {\r\n            if (!wplngIsUpdatePost\r\n                && wplngInputSignature.onload != wplngInputSignature.now\r\n            ) {\r\n                return confirm(wplngI18nSlug.message.exitPage);\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    /**\r\n     * Show all languages\r\n     */\r\n\r\n    $(\"#wplng-modal-edit-show-all\").on(\"click\", function () {\r\n        $(this).hide();\r\n        wplngEditor.find(\".wplng-edit-language\").show();\r\n    });\r\n\r\n\r\n    /**\r\n     * Alert if page is leave without saving\r\n     */\r\n\r\n    let wplngIsUpdatePost = false;\r\n    let wplngInputSignature = {\r\n        onload: wplngGetInputSignature(),\r\n        now: wplngGetInputSignature()\r\n    };\r\n\r\n    function wplngGetInputSignature() {\r\n\r\n        let signature = \"\";\r\n\r\n        wplngEditor.find(\".wplng-edit-language textarea\").each(function () {\r\n            signature += $(this).val();\r\n        });\r\n\r\n        wplngEditor.find(\".wplng-edit-language input[type=checkbox]\").each(function () {\r\n            signature += $(this).prop(\"checked\");\r\n        });\r\n\r\n        return signature;\r\n    }\r\n\r\n    function wplngCheckInputSignature() {\r\n\r\n        wplngInputSignature.now = wplngGetInputSignature();\r\n\r\n        if (wplngInputSignature.onload == wplngInputSignature.now) {\r\n            $(\"#wplng-modal-edit-save\").prop(\"disabled\", true);\r\n        } else {\r\n            $(\"#wplng-modal-edit-save\").prop(\"disabled\", false);\r\n        }\r\n    }\r\n\r\n    wplngUpdateEditorEvents();\r\n\r\n}); // End jQuery loaded event"],"names":["jQuery","document","ready","$","let","wplngEditor","removeClass","addClass","on","this","hide","find","show","wplngIsUpdatePost","wplngInputSignature","onload","wplngGetInputSignature","now","signature","each","val","prop","wplngCheckInputSignature","change","parentSelector","attr","checked","trim","reviewSelector","source","target","text","html","undefined","container","ajax","url","wplngI18nSlug","ajaxUrl","method","data","action","language_source","language_target","success","textarea","setTimeout","console","log","error","click","window","confirm","message","exitPage"],"mappings":"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"}